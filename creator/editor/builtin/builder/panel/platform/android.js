"use strict";const e=require("fs"),a=require("electron"),t=require(Editor.url("packages://builder/panel/platform/common"));exports.template=`\n    <ui-prop name="MD5 Cache" tooltip="${Editor.T("BUILDER.md5Cache_tooltip")}">\n        <ui-checkbox v-value="project.md5Cache"></ui-checkbox>\n    </ui-prop>\n    <ui-prop name="${Editor.T("BUILDER.template")}">\n        <ui-select class="flex-1" v-value="data.template">\n            <template v-for="item in templates">\n                <option v-bind:value="item">{{item}}</option>\n            </template>\n        </ui-select>\n    </ui-prop>\n    \n    <ui-prop name="${Editor.T("BUILDER.package_name")}">\n        <ui-input class="flex-1" v-value="project.packageName"></ui-input>\n    </ui-prop>\n\n    <ui-prop name="Target API Level">\n        <ui-select class="flex-1" v-value="data.apiLevel">\n            <template v-for="item in apiLevels">\n                <option v-bind:value="item">{{item}}</option>\n            </template>\n        </ui-select>\n    </ui-prop>\n\n    <ui-prop name="APP ABI" auto-height>\n        <div class="layout vertical">\n            <ui-checkbox class="item" v-value="armeabiV7a">\n                armeabi-v7a\n            </ui-checkbox>\n            <ui-checkbox class="item" v-value="arm64V8a">\n                arm64-v8a\n            </ui-checkbox>\n            <ui-checkbox class="item" v-value="x86">\n                x86\n            </ui-checkbox>\n        </div>\n    </ui-prop>\n\n    <ui-prop name="${Editor.T("KEYSTORE.keystore")}">\n        <ui-checkbox v-value="data.useDebugKeystore">\n            ${Editor.T("KEYSTORE.use_debug_keystore")}\n        </ui-checkbox>\n    </ui-prop>\n\n    \x3c!-- mi --\x3e\n    \n    <ui-prop name="${Editor.T("KEYSTORE.keystore_path")}" v-disabled="data.useDebugKeystore">\n        <div class="layout horizontal center flex-1">\n            <ui-input class="flex-2" v-value="data.keystorePath"></ui-input>\n            <ui-button class="tiny" v-on:confirm="_onChooseKeystoreClick">\n                ···\n            </ui-button>\n            <ui-button class="tiny" v-on:confirm="_onShowKeystoreClick">\n                ${Editor.T("SHARED.open")}\n            </ui-button>\n            <ui-button class="tiny" v-on:confirm="_onNewKeystoreClick">\n                ${Editor.T("SHARED.new")}\n            </ui-button>\n        </div>\n    </ui-prop>\n    \n    <ui-prop name="${Editor.T("KEYSTORE.keystore_password")}" v-disabled="data.useDebugKeystore">\n        <ui-input class="flex-1" password v-value="data.keystorePassword"></ui-input>\n    </ui-prop>\n    \n    <ui-prop name="${Editor.T("KEYSTORE.keystore_alias")}" v-disabled="data.useDebugKeystore">\n        <ui-input class="flex-1" v-value="data.keystoreAlias"></ui-input>\n    </ui-prop>\n    \n    <ui-prop name="${Editor.T("KEYSTORE.keystore_alias_password")}" v-disabled="data.useDebugKeystore">\n        <ui-input class="flex-1" password v-value="data.keystoreAliasPassword"></ui-input>\n    </ui-prop>\n\n    \x3c!-- mi --\x3e\n\n    <ui-prop name="${Editor.T("BUILDER.orientation")}" auto-height>\n        <div class="layout vertical">\n            <ui-checkbox class="item" v-value="portrait">\n                Portrait\n            </ui-checkbox>\n            <ui-checkbox class="item" v-value="upsideDown">\n                Upside Down\n            </ui-checkbox>\n            <ui-checkbox class="item" v-value="landscapeLeft">\n                Landscape Left\n            </ui-checkbox>\n            <ui-checkbox class="item" v-value="landscapeRight">\n                Landscape Right\n            </ui-checkbox>\n        </div>\n    </ui-prop>\n    \n    \x3c!-- android app bundle --\x3e\n    <ui-prop name="${Editor.T("BUILDER.app_bundle")}">\n        <ui-checkbox class="item" v-value="project.appBundle"></ui-checkbox>\n    </ui-prop>\n\n    ${t.native.renderer}\n    ${t.native.sdkbox}\n    ${t.native.xxtea}\n`,exports.name="android",exports.props={data:null,project:null,anysdk:null},exports.data=function(){var e=this.project.orientation;return{portrait:e.portrait,upsideDown:e.upsideDown,landscapeLeft:e.landscapeLeft,landscapeRight:e.landscapeRight,templates:[],apiLevels:[],armeabi:this.data.appABIs.indexOf("armeabi")>=0,armeabiV7a:this.data.appABIs.indexOf("armeabi-v7a")>=0,arm64V8a:this.data.appABIs.indexOf("arm64-v8a")>=0,x86:this.data.appABIs.indexOf("x86")>=0}},exports.watch={portrait:{handler(e){this.project&&(this.project.orientation.portrait=e)}},upsideDown:{handler(e){this.project&&(this.project.orientation.upsideDown=e)}},landscapeLeft:{handler(e){this.project&&(this.project.orientation.landscapeLeft=e)}},landscapeRight:{handler(e){this.project&&(this.project.orientation.landscapeRight=e)}},armeabi:{handler(e){this._abiValueChanged("armeabi",e)}},armeabiV7a:{handler(e){this._abiValueChanged("armeabi-v7a",e)}},arm64V8a:{handler(e){this._abiValueChanged("arm64-v8a",e)}},x86:{handler(e){this._abiValueChanged("x86",e)}}},exports.created=function(){Editor.Ipc.sendToMain("app:query-cocos-templates",(e,a)=>{if(e)return Editor.warn(e);if(a.forEach(e=>{"android-instant"!==e&&this.templates.push(e)}),this.data){var t=this.data.template;if(a.length<=0)return this.data.template="";-1===a.indexOf(t)&&(this.data.template=a[0])}}),Editor.Ipc.sendToMain("app:query-android-apilevels",(e,a)=>{if(e)return Editor.warn(e);if(a.forEach(e=>{this.apiLevels.push(e)}),this.data){var t=this.data.apiLevel;if(a.length<=0)return this.data.apiLevel="";-1===a.indexOf(t)&&(this.data.apiLevel=a[a.length-1])}})},exports.directives={},exports.methods={_onChooseKeystoreClick(e){e.stopPropagation();let a=Editor.Dialog.openFile({defaultPath:this.data.keystorePath||this.data.buildPath,properties:["openFile"],filters:[{name:"Keystore",extensions:["keystore"]}],title:"Open Keystore"});a&&a[0]&&(this.data.keystorePath=a[0])},_onShowKeystoreClick(t){if(t.stopPropagation(),!e.existsSync(this.data.keystorePath))return Editor.warn("%s not exists!",this.data.keystorePath),void 0;a.shell.showItemInFolder(this.data.keystorePath),a.shell.beep()},_onNewKeystoreClick:function(e){e.stopPropagation(),Editor.Ipc.sendToMain("keystore:open")},_abiValueChanged:function(e,a){if(this.data.appABIs){var t=this.data.appABIs.indexOf(e);a?t<0&&this.data.appABIs.push(e):t>=0&&this.data.appABIs.splice(t,1)}}};