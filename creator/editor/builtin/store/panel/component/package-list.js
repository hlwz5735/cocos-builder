"use struct";const t=require("electron"),e=require("../lib/utils"),a=require("../lib/network"),s=require("../lib/event");exports.template=e.getTemplate("package-list"),exports.components={star:require("./star")},exports.props=["language","id"],exports.data=function(){return{loading:!0,type:"free",data:null,list:null,page:1,totalPage:1}},exports.methods={translate:t=>Editor.T(`store.package-list.${t}`),updateData(){var t=this.id;this.loading=!0,a.get("https://store.cocos.com/api/all_stuff",{cat:t,page:30*(this.page-1),lang:this.language},(t,e)=>{this.loading=!1,this.data=t?null:e})},updateList(){return this.data?("free"==this.type?t=this.data.free_rank:"pay"==this.type&&(t=this.data.pay_rank),t?(this.totalPage=Math.ceil((t.total-0)/30),this.list=t.data,void 0):this.list=null):this.list=null;var t},jumpToPage(t){t<1?t=1:t>this.totalPage&&(t=this.totalPage),this.page=t},_onOpenDevelop(){t.shell.openExternal("https://open.cocos.com/app")},_getUrl:t=>e.completionURL(t,{protocol:"http",host:"imgcdn.store.cocos.com",attach:"!75x75"}),_onTypeChanged(t){this.type=t},_onJumpPackage(t){s.$emit("jump-package",t.id)},_getPackageName(t){var e="";return"en"==this.language&&(e=t.title_eng),e||(e=t.title),e},_getCategory(t){var e="";return"en"==this.language&&(e=t.name_en),e||(e=t.name),e}},exports.watch={page(){this.updateData()},type(){this.page=1},id(){this.page=1,this.updateData()},data(){this.updateList()},type(){this.updateList()}},exports.ready=function(){this.updateData(),s.$on("refresh-data",()=>{this.updateData()})};