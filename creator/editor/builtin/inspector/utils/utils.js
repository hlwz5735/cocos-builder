"use strict";function e(t,r,a,p,n){let l=a.value,c=a.type;a.name=p.displayName?p.displayName:Editor.UI.toHumanText(r),a.path=t,a.attrs=Object.assign({},p),c?"visible"in a&&(a.attrs.visible=a.visible):a.attrs.visible=!1;let i=n[c],s=!1,o=!1,y=Editor.UI.getProperty(c);i&&i.extends&&(s="cc.Asset"===c||"cc.RawAsset"===c||-1!==i.extends.indexOf("cc.Asset")||-1!==i.extends.indexOf("cc.RawAsset"),o=-1!==i.extends.indexOf("cc.Object")),!Array.isArray(a.value)||"default"in p&&!Array.isArray(p.default)?s?(a.type="cc.Asset",a.attrs.assetType=p.type):o?(a.type="cc.Node",a.attrs.typeid=p.type,i&&(a.attrs.typename=i.name)):y||(a.type="Object",i&&(a.attrs.typename=i.name)):(a.type="Array",a.elementType=c,s?(a.elementType="cc.Asset",a.attrs.assetType=p.type):o?(a.elementType="cc.Node",a.attrs.typeid=p.type,i&&(a.attrs.typename=i.name)):y||(a.elementType="Object")),a.compType="cc-prop";let _=!1;"Object"!==a.type||null!==a.value&&void 0!==a.value||(_=!0);let d=!1;if(!1===_&&a.attrs.type&&c!==a.attrs.type&&(i&&i.extends?-1===i.extends.indexOf(a.attrs.type)&&(d=!0):d=!0),_)i=n[a.attrs.type],a.attrs.typename=i?i.name:a.attrs.type,a.compType="cc-null-prop";else if(d)a.compType="cc-type-error-prop";else if("Array"===a.type){a.compType="cc-array-prop";for(let r=0;r<l.length;++r){e(`${t}.${r}`,`[${r}]`,l[r],p,n)}}else if("Object"===a.type){a.compType="cc.ClickEvent"===c?"cc-event-prop":"cc-object-prop";let r=n[c];for(let p in a.value){let l=a.value[p],c=r.properties[p];l&&c?e(`${t}.${p}`,p,l,c,n):delete a.value[p]}}}function t(t,r,a){let p=r.type;if(!p)return Editor.warn("Type can not be null"),void 0;let n=a[p];n&&(n.editor&&(r.__editor__=n.editor),r.__displayName__=n.name?n.name:p);for(let p in r.value){let l=r.value[p],c=n.properties[p];l&&c?e(`${t}.${p}`,p,l,c,a):delete r.value[p]}}let r=/^target\.__comps__\.(\d+)/;module.exports={buildNode:function(e,r,a){let p=r.__type__;if(!p)return Editor.warn("Type can not be null"),void 0;let n=a[p];n&&(n.editor&&(r.__editor__=n.editor),n.name&&(r.__displayName__=n.name));for(let p in r){if("__type__"===p||"__displayName__"===p||"uuid"===p)continue;if("__comps__"===p){let n=r[p];for(let r=0;r<n.length;++r)t(`${e}.__comps__.${r}`,n[r],a);continue}let l=r[p];l.path=`${e}.${p}`,l.readonly=!1;let c=n.properties[p];c&&(r[p].readonly=!!c.readonly)}},compPath:function(e){let t=r.exec(e);return t?t[0].replace(r,"target.__comps__[$1]"):""},normalizePath:function(e){return e=(e=e.replace(/^target\./,"")).replace(/^__comps__\.\d+\./,"")},findRootVue:function(e){for(var t=null;e;){if(e.__vue__){t=e;break}e=e.parentElement}return t.__vue__}};