"use strict";const t=require("fire-fs"),e=require("path"),r=require("../utils/data");exports.template=t.readFileSync(e.join(__dirname,"../template/home.html"),"utf-8"),exports.props=[],exports.data=function(){return{zoom:r.queryZoom(),tab:-1,tabs:[Editor.T("node-library.tab.creator"),Editor.T("node-library.tab.user")],list:[]}},exports.components={classification:require("./classification")},exports.methods={updateData(){this.list=r.queryList(this.tab)},changeTab(t){this.tab=t,this.list=r.queryList(t)},onZoomChanged(t){this.zoom=t.target.value,clearTimeout(this._zoomTimer),this._zoomTimer=setTimeout(()=>{r.setZoom(this.zoom)},500)},onDropAreaMove(t){1===this.tab&&t.detail.dragOptions&&"node-library"!==t.detail.dragOptions.from?Editor.UI.DragDrop.updateDropEffect(t.detail.dataTransfer,"copy"):Editor.UI.DragDrop.updateDropEffect(t.detail.dataTransfer,"none")},onDropAreaAccept(t){t.preventDefault(),1===this.tab&&t.detail.dragItems&&t.detail.dragItems.length&&t.detail.dragItems.forEach(t=>{Editor.assetdb.queryMetaInfoByUuid(t.id,(e,a)=>{if("prefab"!==a.defaultType)return Editor.warn(Editor.T("node-library.warning.prefab_only"));r.pushUserPrefab(t.id)})})}},exports.created=function(){this.changeTab(0),r.event.on("profile-save",this.updateData)},exports.destroyed=function(){r.event.removeListener("profile-save",this.updateData)};