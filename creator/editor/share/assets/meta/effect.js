"use strict";const e=require("./custom-asset"),r=require("fire-path"),s=require("fire-fs"),t=Editor.require("unpack://engine/cocos2d/renderer/build/shdc-lib"),i=!1;i||t.addChunksCache(Editor.url("unpack://engine/cocos2d/renderer/build/chunks"));module.exports=class extends e{static version(){return"1.0.15"}static defaultType(){return"effect"}constructor(e){super(e),this.compiledShaders=[]}import(e,c){let d=r.basenameNoExt(e),u=s.readFileSync(e,"utf8");i&&t.addChunksCache(Editor.url("unpack://engine/cocos2d/renderer/build/chunks"));let a=t.buildEffect(d,u),n=new cc.EffectAsset;Object.assign(n,a),this.compiledShaders=a.shaders.map(e=>({vert:e.vert,frag:e.frag})),this._assetdb.saveAssetToLibrary(this.uuid,n),c&&c()}};