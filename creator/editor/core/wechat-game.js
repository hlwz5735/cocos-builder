require("compare-versions");const r=require("electron").dialog;module.exports={run(o){const e=require("fire-path"),t=require("fire-fs");let i,n=Editor.App._profile.data["wechatgame-app-path"];if(!n)return Editor.error(Editor.T("PREFERENCES.error.wechatgame_app_path_empty")),void 0;if(i="darwin"===process.platform?e.join(n,"Contents/Resources/app.nw/bin/cli"):e.join(n,"cli.bat"),!t.existsSync(i))return r.showErrorBox(Editor.T("BUILDER.error.build_error"),Editor.T("BUILDER.wechat_game.client_path_error",{path:i})),void 0;let a=["-o",o.dest,"-f","cocos"];console.log(`Run command : ${a.join(" ")}`);let s=(0,require("child_process").spawn)(i,a);s.stdout.on("data",function(r){Editor.log(r.toString())}),s.stderr.on("data",function(r){Editor.error(r.toString())})}};