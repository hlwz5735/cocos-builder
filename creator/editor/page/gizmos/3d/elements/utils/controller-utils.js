"use strict";let e=require("./controller-shape");const t=require("../../../utils/external"),r=t.NodeUtils,n=require("./controller-shape-collider"),{gfx:o,create3DNode:c,addMeshToNode:i,setMeshColor:l,setNodeOpacity:u}=require("../../../utils/engine"),a=require("../../../utils"),s=t.EditorMath,d=cc.vmath.vec3;let f={};f.YELLOW=new cc.Color(255,255,0),f.arrow=function(t,r,u,a){let s=c("arrow"),d=c("ArrowBody");d.parent=s,i(d,e.lineWithBoundingBox(u),{alpha:200,noDepthTestForLines:!0}),l(d,a),d.eulerAngles=cc.v3(0,0,90);let f=d.addComponent(n);f.isDetectMesh=!1;let D=c("ArrowHead");return D.parent=s,i(D,e.cone(r,t),{cullMode:o.CULL_BACK}),l(D,a),D.setPosition(cc.v3(0,u+t/2,0)),(f=D.addComponent(n)).isDetectMesh=!1,s},f.quad=function(t,r,n=cc.Color.RED,o={}){let u=c("quad");return i(u,e.quad(t,r),o),l(u,n),u},f.borderPlane=function(t,r,o,a){let s=t/2,d=r/2,f=c("borderPlane"),D=c("Plane");function h(t,r,n){let o=c("border");return i(o,e.line(t,r),{alpha:200,noDepthTestForLines:!0}),l(o,n),o.parent=f,o}return i(D,e.quad(t,r)),l(D,o),u(D,a),D.parent=f,D.addComponent(n).isDetectMesh=!1,h(cc.v3(0,r/2,0),cc.v3(s,r/2,0),o),h(cc.v3(s,d,0),cc.v3(s,0,0),o),f},f.circle=function(t,r,n,o){let u=c("circle");return i(u,e.circle(t,r,n)),l(u,o),u},f.torus=function(t,r,u,a){let s=c("torus");i(s,e.torus(t,r,u),{cullMode:o.CULL_BACK}),l(s,a);let d=s.addComponent(n);return d.isDetectMesh=!0,d.isRender=!1,s},f.cube=function(t,r,u,a){let s=c("cube");return i(s,e.cube(t,r,u),{cullMode:o.CULL_BACK}),l(s,a),s.addComponent(n).isDetectMesh=!1,s},f.scaleSlider=function(t,r,o){let u=c("scaleSlider"),a=f.cube(t,t,t,o);a.name="ScaleSliderHead",a.parent=u,a.setPosition(0,r+t/2,0);let s=c("ScaleSliderBody");return i(s,e.lineWithBoundingBox(r),{noDepthTestForLines:!0}),l(s,o),s.parent=u,s.eulerAngles=cc.v3(0,0,90),s.addComponent(n).isDetectMesh=!1,u},f.getCameraDistanceFactor=function(e,t){let n=r.getWorldPosition3D(t);return cc.vmath.vec3.distance(e,n)},f.lineTo=function(t,r,n=cc.Color.RED,o){let u=c("line");return i(u,e.line(t,r),o),l(u,n),u},f.disc=function(t,r,n,o=cc.Color.RED){let u=c("disc");return i(u,e.disc(t,r,n)),l(u,o),u},f.sector=function(t,r,n,o,u,a=cc.Color.RED,s){let d=c("sector");return i(d,e.sector(t,r,n,o,u,60),s),l(d,a),d},f.arc=function(t,r,n,o,u,a=cc.Color.RED,s){let d=c("arc");return i(d,e.arc(t,r,n,o,u),s),l(d,a),d},f.arcDirectionLine=function(t,r,n,o,u,a,s,d=cc.Color.RED){let f=c("arcDirLine");return i(f,e.arcDirectionLine(t,r,n,o,u,a,s)),l(f,d),f},f.lines=function(t,r,n=cc.Color.RED){let o=c("lines");return i(o,e.lines(t,r)),l(o,n),o},f.wireframeBox=function(t,r,n){let o=c("wireframeBox");return i(o,e.wireframeBox(t,r)),l(o,n),o},f.frustum=function(t,r,n,o,u){let a=c("frustumNode");return i(a,e.frustum(t,r,n,o)),l(a,u),a},f.angle=function(e,t){let r=Math.sqrt(a.getSqrMagnitude(e)*a.getSqrMagnitude(t));if(r<s.EPSILON)return 0;let n=s.clamp(d.dot(e,t)/r,-1,1);return Math.acos(n)*s.R2D},module.exports=f;