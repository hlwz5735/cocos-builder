"use strict";const e=require("../tools"),t=require("./joint-gizmo");module.exports=class extends t{createAnchorGroup(){let e=this._root.group();return e.circle(15).fill("none").center(0,0),e.circle(5).stroke("none").center(0,0),e}createToolGroup(){let t=this._root.group(),c=t.line().stroke({width:4,color:"#4793e2",opacity:.5}),r=t.line().stroke({width:3,color:"#cccc00",opacity:.5}),o=t.circle(6).fill({color:"#cccc00",opacity:.5});return t.plot=(n=>{n.distance?(c.plot(n.anchor.x,n.anchor.y,n.connectedAnchor.x,n.connectedAnchor.y),r.plot(n.anchor.x,n.anchor.y,n.distance.x,n.distance.y),r.style("stroke-dasharray",e.dashLength()),o.center(n.distance.x,n.distance.y),t.show()):t.hide()}),t}createArgs(){let e=t.prototype.createArgs.call(this);if(this.target.connectedBody){let t=cc.vmath.mat4.create();this.node.getWorldMatrix(t),t.m12=t.m13=0;let c=cc.v3(this.target.distance,0,0);cc.vmath.vec3.transformMat4(c,c,t);let r=this.getScreenDelta(c);r.z=0;let o=r.mag(),n=cc.v2(e.connectedAnchor.x-e.anchor.x,e.connectedAnchor.y-e.anchor.y);e.distance=n.normalizeSelf().mulSelf(o).addSelf(e.anchor)}return e}};